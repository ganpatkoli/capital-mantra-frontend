{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 76, "column": 0}, "map": {"version":3,"sources":["file:///F:/CapitalMantra/cpfrotend/src/app/news/page.js"],"sourcesContent":["// components/Modules/MarketNewsSection.jsx\r\n\"use client\";\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport Link from 'next/link';\r\nimport axios from 'axios';\r\n// Icons for visual hierarchy\r\nimport { Send, Clock, BookOpen, ChevronLeft, ChevronRight, TrendingUp, Filter } from 'lucide-react';\r\n\r\nconst DEFAULT_LIMIT = 9;\r\n\r\n// API functions (omitted for brevity, assume fetchNews is the same)\r\nconst fetchNews = async (page, limit) => {\r\n    try {\r\n        const response = await axios.get(`http://localhost:5000/api/news?page=${page}&limit=${limit}`);\r\n        const data = response.data;\r\n        return data || { news: [], totalPages: 1, totalItems: 0 };\r\n    } catch (error) {\r\n        console.error(\"Error fetching news data:\", error);\r\n        return { news: [], totalPages: 1, totalItems: 0 };\r\n    }\r\n};\r\n\r\nconst extractCategories = (data) => {\r\n    const categories = new Set();\r\n    data.news.forEach(item => {\r\n        if (item.category) {\r\n            categories.add(item.category);\r\n        }\r\n    });\r\n    return Array.from(categories).sort();\r\n};\r\n\r\n// ----------------------------------------------------------------------\r\n\r\nconst MarketNewsFilters = ({ activeCategory, setActiveCategory, categories }) => {\r\n    const filterCategories = [\"All\", ...categories];\r\n\r\n    return (\r\n        <div className=\"mt-6 flex flex-wrap gap-3 items-center p-4 bg-slate-100/50 rounded-lg border border-slate-200 dark:bg-slate-800 dark:border-slate-700\">\r\n             <span className=\"text-sm font-semibold text-slate-700 dark:text-slate-300 flex items-center gap-1\">\r\n                 <Filter className=\"w-4 h-4 text-emerald-600\" />\r\n                 Sectors:\r\n             </span>\r\n            {filterCategories.map((cat) => (\r\n                <button\r\n                    key={cat}\r\n                    onClick={() => setActiveCategory(cat)}\r\n                    // Filters: Flat, clean look with strong text contrast\r\n                    className={`rounded-lg px-4 py-1.5 font-semibold text-sm transition duration-200 border ${activeCategory === cat\r\n                            ? \"bg-emerald-600 border-emerald-700 text-white shadow-sm shadow-emerald-500/50\" // Active: Solid background\r\n                            : \"bg-white border-slate-300 text-slate-800 hover:bg-emerald-50 hover:border-emerald-500 dark:bg-slate-700 dark:border-slate-600 dark:text-slate-200 dark:hover:bg-slate-600\" // Inactive: Minimal border\r\n                        }`}\r\n                >\r\n                    {cat}\r\n                </button>\r\n            ))}\r\n        </div>\r\n    );\r\n};\r\n\r\nconst NewsCard = ({ news }) => {\r\n    const formattedDate = new Date(news.date).toLocaleTimeString('en-IN', {\r\n        year: 'numeric',\r\n        month: 'short',\r\n        day: 'numeric',\r\n        hour: '2-digit',\r\n        minute: '2-digit'\r\n    });\r\n\r\n    return (\r\n        <Link\r\n            key={news.title}\r\n            href={news.link}\r\n            target=\"_blank\"\r\n            rel=\"noopener noreferrer\"\r\n            // Card: Border-only appearance, no shadow, subtle color line on hover\r\n            className=\"group flex flex-col rounded-xl border border-slate-200 bg-white transition-all duration-300 hover:border-emerald-500 dark:border-slate-700 dark:bg-slate-900 overflow-hidden\"\r\n        >\r\n            {/* Minimalist Top Bar: Only Meta Data */}\r\n            <div className=\"p-4 flex flex-col space-y-2\">\r\n\r\n                {/* Category Tag & Source (Top Line) */}\r\n                <div className=\"flex items-center justify-between text-xs font-semibold\">\r\n                    <span className=\"inline-flex items-center rounded-full bg-emerald-600/90 px-2.5 py-0.5 text-[11px] font-bold uppercase tracking-wider text-white shadow-md\">\r\n                        {news.category || \"General\"}\r\n                    </span>\r\n                    <span className=\"text-slate-500 dark:text-slate-400\">\r\n                        {news.news_source || news.source}\r\n                    </span>\r\n                </div>\r\n                \r\n                {/* Vertical Separator for Visual Break */}\r\n                <div className=\"w-8 h-0.5 bg-emerald-500 mt-2 rounded-full\"></div>\r\n\r\n                {/* Title (Headline) - Clean Typography */}\r\n                <h3 className=\"text-xl font-bold leading-snug text-slate-900 group-hover:text-emerald-600 transition dark:text-white\">\r\n                    {news.title}\r\n                </h3>\r\n            </div>\r\n\r\n            {/* Summary (Body text) - Main Content */}\r\n            <div className=\"px-4 pt-0 pb-4 flex-grow\">\r\n                <p className=\"text-sm leading-relaxed text-slate-600 dark:text-slate-400\">\r\n                    {news.summary || \"No detailed summary available. Click to read the full article.\"}\r\n                </p>\r\n            </div>\r\n\r\n            {/* Bottom Footer Bar (Date & Link) - Separated by a thin line */}\r\n            <div className=\"mt-auto border-t border-slate-100 dark:border-slate-800 p-4 bg-slate-50 dark:bg-slate-900/80\">\r\n                <div className=\"flex items-center justify-between text-sm font-medium\">\r\n                    <span className=\"flex items-center gap-1 text-slate-500 dark:text-slate-400\">\r\n                        <Clock className='w-4 h-4 text-emerald-500' />\r\n                        {formattedDate}\r\n                    </span>\r\n\r\n                    {/* Link: Simple green text link on hover */}\r\n                    <div className=\"inline-flex items-center gap-1 text-emerald-600 dark:text-emerald-400 transition-all duration-200\">\r\n                        Read More\r\n                        <BookOpen className='w-4 h-4 transition-transform group-hover:translate-x-0.5' />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </Link>\r\n    );\r\n};\r\n\r\n\r\nconst MarketNewsSection = () => {\r\n    // ... (State management logic remains the same) ...\r\n\r\n    const [allNews, setAllNews] = useState([]);\r\n    const [activeCategory, setActiveCategory] = useState(\"All\");\r\n    const [categories, setCategories] = useState([]);\r\n\r\n    // Pagination State\r\n    const [pagedNews, setPagedNews] = useState([]);\r\n    const [currentPage, setCurrentPage] = useState(1);\r\n    const [totalPages, setTotalPages] = useState(1);\r\n    const [isLoading, setIsLoading] = useState(true);\r\n\r\n    const [filteredNews, setFilteredNews] = useState([]);\r\n\r\n    // --- EFFECT 1: Load data from API ---\r\n    useEffect(() => {\r\n        const loadNews = async () => {\r\n            setIsLoading(true);\r\n            const apiData = await fetchNews(1, 500);\r\n\r\n            if (apiData.news && apiData.news.length > 0) {\r\n                setAllNews(apiData.news);\r\n                setCategories(extractCategories(apiData));\r\n            } else {\r\n                 setAllNews([]);\r\n                 setCategories([]);\r\n            }\r\n            setIsLoading(false);\r\n        };\r\n        loadNews();\r\n    }, []);\r\n\r\n    // --- EFFECT 2: Filter and Page on state change ---\r\n    useEffect(() => {\r\n        const filtered = allNews.filter((news) => {\r\n            if (activeCategory === \"All\") return true;\r\n            return news.category === activeCategory; \r\n        });\r\n\r\n        const startIndex = (currentPage - 1) * DEFAULT_LIMIT;\r\n        const endIndex = currentPage * DEFAULT_LIMIT;\r\n\r\n        const paged = filtered.slice(startIndex, endIndex);\r\n\r\n        setFilteredNews(filtered);\r\n        setPagedNews(paged);\r\n        setTotalPages(Math.ceil(filtered.length / DEFAULT_LIMIT));\r\n\r\n    }, [activeCategory, allNews, currentPage]);\r\n\r\n\r\n    const handlePageChange = (newPage) => {\r\n        if (newPage >= 1 && newPage <= totalPages) {\r\n            setCurrentPage(newPage);\r\n            document.getElementById('market-news').scrollIntoView({ behavior: 'smooth' });\r\n        }\r\n    };\r\n\r\n    return (\r\n        <section\r\n            id=\"market-news\"\r\n            // Section Background: Very light for contrast\r\n            className=\"border-b border-slate-200/70 bg-white py-20 sm:py-28 dark:border-slate-800/70 dark:bg-slate-950\"\r\n        >\r\n            {/* Full Width Header Container (Outside main content div) */}\r\n            <div className=\" text-center max-7xl mb-12\">\r\n                <div className=\"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8\">\r\n                    <div className='max-w-7xl'>\r\n                        {/* Title: Full Width, Strong visual impact */}\r\n                        <h2 className=\"text-4xl font-extrabold tracking-tight text-slate-900 dark:text-white\">\r\n                            <TrendingUp className=\"inline w-8 h-8 mr-3 text-emerald-600\" />\r\n                            Financial News Digest: Real-Time Headlines\r\n                        </h2>\r\n                        <p className=\"mt-2 text-lg text-slate-600 dark:text-slate-400\">\r\n                            Breaking headlines and curated intelligence from India's key financial sectors.\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            \r\n            {/* Main Content & Filters Container */}\r\n            <div className=\"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8\">\r\n                \r\n                {/* Filters Section (Moved Down) */}\r\n                <div className=\"mb-12\">\r\n                    {!isLoading && allNews.length > 0 && (\r\n                        <MarketNewsFilters\r\n                            activeCategory={activeCategory}\r\n                            setActiveCategory={(cat) => {\r\n                                setActiveCategory(cat);\r\n                                setCurrentPage(1); \r\n                            }}\r\n                            categories={categories}\r\n                        />\r\n                    )}\r\n                </div>\r\n\r\n                {/* News Grid (Content Area) */}\r\n                <div className=\"grid gap-8 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3\">\r\n                    {isLoading ? (\r\n                        <div className=\"col-span-full text-center py-24 text-emerald-600 font-semibold text-lg animate-pulse\">\r\n                            <Send className=\"inline w-6 h-6 mr-2 animate-bounce transform rotate-45\" />\r\n                            Fetching latest market intelligence...\r\n                        </div>\r\n                    ) : pagedNews.length > 0 ? (\r\n                        pagedNews.map((news, index) => (\r\n                            <NewsCard key={index} news={news} /> \r\n                        ))\r\n                    ) : (\r\n                        <div className=\"col-span-full text-center py-20 text-slate-500 border border-dashed border-slate-300 dark:border-slate-700 rounded-xl p-6\">\r\n                            No news found in the selected category or on this page.\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Pagination Controls */}\r\n                {pagedNews.length > 0 && totalPages > 1 && (\r\n                    <div className=\"mt-16 flex justify-center items-center gap-4\">\r\n                        <button\r\n                            onClick={() => handlePageChange(currentPage - 1)}\r\n                            disabled={currentPage === 1}\r\n                            className=\"flex items-center gap-1 px-6 py-2 text-base font-semibold rounded-lg transition disabled:opacity-50 disabled:cursor-not-allowed bg-emerald-600 text-white hover:bg-emerald-700 shadow-md\"\r\n                        >\r\n                            <ChevronLeft className='w-4 h-4' /> Previous\r\n                        </button>\r\n                        \r\n                        <span className=\"text-lg font-medium text-slate-700 dark:text-slate-300\">\r\n                            Page <span className='font-extrabold text-emerald-600 dark:text-emerald-400'>{currentPage}</span> of {totalPages}\r\n                        </span>\r\n\r\n                        <button\r\n                            onClick={() => handlePageChange(currentPage + 1)}\r\n                            disabled={currentPage === totalPages}\r\n                            className=\"flex items-center gap-1 px-6 py-2 text-base font-semibold rounded-lg transition disabled:opacity-50 disabled:cursor-not-allowed bg-emerald-600 text-white hover:bg-emerald-700 shadow-md\"\r\n                        >\r\n                            Next <ChevronRight className='w-4 h-4' />\r\n                        </button>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </section>\r\n    );\r\n};\r\n\r\nexport default MarketNewsSection;"],"names":[],"mappings":"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"}}]
}