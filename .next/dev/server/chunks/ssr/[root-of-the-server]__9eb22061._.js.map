{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 76, "column": 0}, "map": {"version":3,"sources":["file:///F:/CapitalMantra/cpfrotend/src/app/calculators/page.js"],"sourcesContent":["\"use client\";\r\nimport React, { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\n\r\nexport default function ProfessionalTDSCalculator() {\r\n  const [residentStatus, setResidentStatus] = useState(\"resident\");\r\n  const [natureOfPayment, setNatureOfPayment] = useState(\"\");\r\n  const [amount, setAmount] = useState(100000);\r\n  const [panNotAvailable, setPanNotAvailable] = useState(false);\r\n  const [tdsRates, setTdsRates] = useState([]);\r\n  // const [loading, setLoading] = useState(true);\r\n\r\n\r\n\r\n      const { data, loading, error } = useAPI(\"ipo/all\");\r\n  \r\n\r\n\r\n  useEffect(() => {\r\n    const fetchRates = async () => {\r\n      try {\r\n        const response = await axios.get(\"https://tools.quicko.com/api/tds-rates/individual\", {headers: {\r\n          \"User-Agent\": \"Mozilla/5.0\",\r\n          \"Accept\": \"application/json\"\r\n        }});\r\n\r\n        if (!response.data.success) throw new Error(\"API failed\");\r\n\r\n        const rates =\r\n          response.data?.data?.data?.tds_rate || [];\r\n\r\n        setTdsRates(rates);\r\n        if (rates.length > 0) {\r\n          setNatureOfPayment(rates[0].section);\r\n        }\r\n        setLoading(false);\r\n      } catch (error) {\r\n        console.warn(\"Using fallback TDS rates\");\r\n\r\n        const fallbackRates = [\r\n          {\r\n            section: \"194J\",\r\n            nature_of_payment: \"professional_fees\",\r\n            threshold: \"30000\",\r\n            deduction_rate: 10,\r\n            residential_status: \"resident\",\r\n            pan_inoperative_applicable_rate: 20\r\n          },\r\n          {\r\n            section: \"194C\",\r\n            nature_of_payment: \"contractor_payment\",\r\n            threshold: \"30000\",\r\n            deduction_rate: 1,\r\n            residential_status: \"resident\",\r\n            pan_inoperative_applicable_rate: 20\r\n          },\r\n          {\r\n            section: \"194\",\r\n            nature_of_payment: \"dividend\",\r\n            threshold: \"5000\",\r\n            deduction_rate: 10,\r\n            residential_status: \"resident\",\r\n            pan_inoperative_applicable_rate: 20\r\n          }\r\n        ];\r\n\r\n        setTdsRates(fallbackRates);\r\n        setNatureOfPayment(\"194J\");\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchRates();\r\n  }, []);\r\n\r\n  const formatNature = (text) =>\r\n    text\r\n      ?.split(\"_\")\r\n      .map(w => w.charAt(0).toUpperCase() + w.slice(1))\r\n      .join(\" \");\r\n\r\n  const currentSection =\r\n    tdsRates.find(\r\n      r =>\r\n        r.section === natureOfPayment &&\r\n        r.residential_status === residentStatus\r\n    ) || {\r\n      deduction_rate: 10,\r\n      threshold: \"0\",\r\n      pan_inoperative_applicable_rate: 20\r\n    };\r\n\r\n  const threshold = Number(currentSection.threshold);\r\n  const rate = panNotAvailable\r\n    ? currentSection.pan_inoperative_applicable_rate\r\n    : currentSection.deduction_rate;\r\n\r\n  const tdsAmount =\r\n    amount > threshold ? (amount * rate) / 100 : 0;\r\n  const payableAmount = amount - tdsAmount;\r\n\r\n  if (loading)\r\n    return (\r\n      <div className=\"p-20 text-center font-bold text-blue-600 animate-pulse\">\r\n        Fetching latest TDS rates...\r\n      </div>\r\n    );\r\n\r\n  return (\r\n    <div className=\"max-w-6xl mx-auto bg-white border rounded-3xl shadow-2xl flex flex-col lg:flex-row overflow-hidden mt-10\">\r\n\r\n      {/* LEFT */}\r\n      <div className=\"flex-1 p-10 space-y-8 border-r\">\r\n        <h2 className=\"text-xl font-bold\">TDS Details</h2>\r\n\r\n        <div className=\"flex gap-2 bg-slate-100 p-1 rounded-xl w-fit\">\r\n          {[\"resident\", \"non-resident\"].map(status => (\r\n            <button\r\n              key={status}\r\n              onClick={() => setResidentStatus(status)}\r\n              className={`px-8 py-2 text-xs font-black uppercase rounded-lg ${residentStatus === status\r\n                ? \"bg-white text-blue-600 shadow\"\r\n                : \"text-gray-400\"\r\n                }`}\r\n            >\r\n              {status}\r\n            </button>\r\n          ))}\r\n        </div>\r\n\r\n        <select\r\n          value={natureOfPayment}\r\n          onChange={e => setNatureOfPayment(e.target.value)}\r\n          className=\"w-full p-4 rounded-xl border font-bold\"\r\n        >\r\n          {tdsRates\r\n            .filter(r => r.residential_status === residentStatus)\r\n            .map((r, i) => (\r\n              <option key={i} value={r.section}>\r\n                Section {r.section} – {formatNature(r.nature_of_payment)}\r\n              </option>\r\n            ))}\r\n        </select>\r\n\r\n        <input\r\n          type=\"number\"\r\n          value={amount}\r\n          onChange={e => setAmount(Number(e.target.value))}\r\n          className=\"w-full p-4 text-2xl font-black rounded-xl border\"\r\n        />\r\n\r\n        <label className=\"flex items-center gap-3\">\r\n          <input\r\n            type=\"checkbox\"\r\n            checked={panNotAvailable}\r\n            onChange={e => setPanNotAvailable(e.target.checked)}\r\n          />\r\n          PAN not available\r\n        </label>\r\n      </div>\r\n\r\n      {/* RIGHT */}\r\n      <div className=\"flex-1 p-10 bg-slate-50\">\r\n        <div className=\"bg-white p-8 rounded-xl text-center shadow\">\r\n          <p className=\"text-sm font-bold text-gray-400\">\r\n            TDS Deducted\r\n          </p>\r\n          <p className=\"text-5xl font-black\">\r\n            ₹{tdsAmount.toLocaleString()}\r\n          </p>\r\n          <p className=\"mt-2 text-xs font-bold text-blue-600\">\r\n            Applied Rate: {rate}%\r\n          </p>\r\n        </div>\r\n\r\n        <div className=\"mt-6 flex justify-between\">\r\n          <div>\r\n            <p className=\"font-black text-xl\">\r\n              ₹{payableAmount.toLocaleString()}\r\n            </p>\r\n            <p className=\"text-xs text-gray-500\">Net Payable</p>\r\n          </div>\r\n          <div>\r\n            <p className=\"font-black text-xl\">\r\n              ₹{tdsAmount.toLocaleString()}\r\n            </p>\r\n            <p className=\"text-xs text-gray-500\">TDS</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}